<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<META name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">
<META name=keywords content="">
<link href="other/audio.css" rel="stylesheet" type="text/css">
<title>迪士普博物馆</title>
</head>
</head>

<body>
<div class="main">

<DIV class=header>语音导览</DIV>

<DIV class=media>

	<DIV class=m-bg><IMG alt="" src="images/media_bg_480P.jpg"></DIV>
	<DIV style="BACKGROUND-IMAGE: url(images/media_bg_480P.jpg)" class=m-img><SPAN></SPAN>&nbsp;</DIV>
	<div class="m-title">该语音由<span>迪士普智慧科技</span>平台提供</div>
	
    <div class="audiojs " classname="audiojs" id="audiojs_wrapper0"><audio src="gu.mp3" preload="auto"></audio>
		<div class="time cl"><em id = "currentTime" class="played">00:00</em><strong id = "totalTime" class="duration">01:00</strong></div>
		<div class="play-pause"><img class="play" id = "play" src = "images/img.png" width="38" height="38" onclick="myFunction()"></img><p class="pause"></p><p class="loading"></p><p class="error"></p></div>
		<div class="error-message"></div>   <div class="scrubber"><div class="progress" style="width: 0px;"></div>
		<div class="loaded" style="width: 640px;"></div></div>
	</div>
	
</DIV>

<!-- 播放器star -->
<div id = "audio-div" style="display:none;" class="zitop">
<audio id = "audio" controls="controls">
	<source src="audio/鎏金钟.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio>
</div>
<!-- 播放器end -->

<div class="mainContent">
    <div class="welcome" ><b>鎏金钟</b><span><small></small></span></div>
    <div class="content">
    <p class="MsoNormal">年份：19世纪中期<br/>    
		产地：英国<br/>  
		八音盒的发明故事：我们的古人--无论是东方还是西方的，都坚信音乐是用来和天神进行对话的工具，因此美妙的旋律往往会被人们称之为天籁之音。<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;得益于欧洲工业革命日臻成熟的机械钟表技术，1796年瑞士钟表匠安托•法布尔制造出世界上第一个八音盒，安托•法布尔常年居住在瑞士近法国的一座山中制作机械手表。因为持续的法国革命战争阻断了货物运输通道，用于制作手表的原材料始终无法送入山中。法布尔在山里无事可做，甚是无聊。一日，法布尔为了发泄郁闷，将几只手表半成品砸向墙上，不料手表发出叮叮咚咚的声响。法布尔听到声音，忽然改变了主意，将现成的材料改良，制作出世界上第一个真正意义上的八音盒。<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;因此我们放了一个鎏金钟在此纪念这位伟大的钟表匠。
<span style="font-family: 宋体; font-size: 10.5pt; mso-spacerun: &#39;yes&#39;; mso-font-kerning: 1.0000pt"><o:p></o:p></span></p>
<!--EndFragment-->    </div>
  </div>

<DIV class=code><IMG alt="" src="images/code.jpg" width="100%"></DIV><!-- Piwik -->
<script type="text/javascript" >
var myAudio = document.getElementById("audio");
var nClick = 1;
var time = 1;
var idOfClock;
var totalTime;

if (!myAudio.src) {
    myAudio.src = "https://dsppa1988.github.io/guide/audio/%E9%8E%8F%E9%87%91%E9%92%9F.mp3"
}
 
playCotrol();

function sToHms(s){
  s = Math.floor(s);  //如果输入的是浮点数，则舍弃小数位
   
  var h = Math.floor(s/3600);  //计算得出小时数
  if(h<10){  //调整为两位数的格式
    h = '0'+h;
  }
   
  var m = Math.floor(s/60-h*60);  //计算得出分钟数
  if(m<10){  //调整为两位数的格式
    m = '0'+m;
  }
   
  var s = s%60;  //计算得出剩下的秒数
  if(s<10){  //调整为两位数的格式
    s = '0'+s;
  }
   
  return m+':'+s;  //最后连接成字符串并返回
}

function setTotalTime(){
	totalTime = myAudio.duration;
	if(!isNaN(totalTime) ){
		if(totalTime > 0){
			document.getElementById("totalTime").innerHTML = sToHms(totalTime);
		}
	}
} 
window.onload=setTotalTime;

function clock(){
	document.getElementById("currentTime").innerHTML = sToHms(time++);
}


//播放事件监听
function playCotrol() {
    myAudio.addEventListener("loadeddata", //歌曲已经完整的加载完毕
        function() { 
            totalTime = myAudio.duration;  
            if(!isNaN(totalTime)){
			if(totalTime != 0){
				document.getElementById("totalTime").innerHTML = sToHms(totalTime);
			}
	}
        }, false);
	myAudio.addEventListener("pause",
        function() { //监听暂停
            
        }, false);
    myAudio.addEventListener("ended", function() { //歌曲已经播放结束
		time = 0;
		nClick = 1;
		document.getElementById("currentTime").innerHTML = "00:00";
		document.getElementById("play").src = "images/img.png"
		clearInterval(idOfClock);
    }, false)
}

//处理播放按钮点击事件
function myFunction()
{
	if(nClick == 1){
		nClick = 2;
		myAudio.play();
		document.getElementById("play").src = "images/pause.png"
		idOfClock = setInterval("clock()",1000); //定时器刷新播放时间
	}else if(nClick == 2){
		nClick = 1;
		myAudio.pause();
		document.getElementById("play").src = "images/img.png"
		clearInterval(idOfClock);
	}
}
</script>
</body>
</html>
