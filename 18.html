<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<META name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">
<META name=keywords content="">
<link href="other/audio.css" rel="stylesheet" type="text/css">
<title>迪士普博物馆</title>
</head>
</head>

<body>
<div class="main">

<DIV class=header>语音导览</DIV>

<DIV class=media>

	<DIV class=m-bg><IMG alt="" src="images/media_bg_480P.jpg"></DIV>
	<DIV style="BACKGROUND-IMAGE: url(images/media_bg_480P.jpg)" class=m-img><SPAN></SPAN>&nbsp;</DIV>
	<div class="m-title">该语音由<span>迪士普智慧科技</span>平台提供</div>
	
    <div class="audiojs " classname="audiojs" id="audiojs_wrapper0"><audio src="gu.mp3" preload="auto"></audio>
		<div class="time cl"><em id = "currentTime" class="played">00:00</em><strong id = "totalTime" class="duration">01:00</strong></div>
		<div class="play-pause"><img class="play" id = "play" src = "images/img.png" width="38" height="38" onclick="myFunction()"></img><p class="pause"></p><p class="loading"></p><p class="error"></p></div>
		<div class="error-message"></div>   <div class="scrubber"><div class="progress" style="width: 0px;"></div>
		<div class="loaded" style="width: 640px;"></div></div>
	</div>
	
</DIV>

<!-- 播放器star -->
<div id = "audio-div" style="display:none;" class="zitop">
<audio id = "audio" controls="controls">
	<source src="audio/滚筒八音盒.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio>
</div>
<!-- 播放器end -->

<div class="mainContent">
    <div class="welcome" ><b>滚筒八音盒</b><span><small></small></span></div>
    <div class="content">
    <p class="MsoNormal">年份：20世纪<br/>    
		产地：欧洲<br/>  
		背后的故事：八音盒的制作技艺非常精湛，因此一台八音盒造价也非常高，能消费起八音盒的人只有贵族，他们在城堡里打发闲暇或举办小型舞会时，都少不了八音盒。此八音盒是三个贵族家庭联姻，专门定制的。它是通过机械上弦发条的动力完成金属音梳来弹拨滚筒上的音符。
<span style="font-family: 宋体; font-size: 10.5pt; mso-spacerun: &#39;yes&#39;; mso-font-kerning: 1.0000pt"><o:p></o:p></span></p>
<!--EndFragment-->    </div>
  </div>

<DIV class=code><IMG alt="" src="images/code.jpg" width="100%"></DIV><!-- Piwik -->
<script type="text/javascript" >
var myAudio = document.getElementById("audio");
var nClick = 1;
var time = 1;
var idOfClock;
var totalTime;

if (!myAudio.src) {
    myAudio.src = "https://dsppa1988.github.io/guide/audio/%E6%BB%9A%E7%AD%92%E5%85%AB%E9%9F%B3%E7%9B%92.mp3"
}
 
playCotrol();

function sToHms(s){
  s = Math.floor(s);  //如果输入的是浮点数，则舍弃小数位
   
  var h = Math.floor(s/3600);  //计算得出小时数
  if(h<10){  //调整为两位数的格式
    h = '0'+h;
  }
   
  var m = Math.floor(s/60-h*60);  //计算得出分钟数
  if(m<10){  //调整为两位数的格式
    m = '0'+m;
  }
   
  var s = s%60;  //计算得出剩下的秒数
  if(s<10){  //调整为两位数的格式
    s = '0'+s;
  }
   
  return m+':'+s;  //最后连接成字符串并返回
}

function setTotalTime(){
	totalTime = myAudio.duration;
	if(!isNaN(totalTime) ){
		if(totalTime > 0){
			document.getElementById("totalTime").innerHTML = sToHms(totalTime);
		}
	}
} 
window.onload=setTotalTime;

function clock(){
	document.getElementById("currentTime").innerHTML = sToHms(time++);
}


//播放事件监听
function playCotrol() {
    myAudio.addEventListener("loadeddata", //歌曲已经完整的加载完毕
        function() { 
            totalTime = myAudio.duration;  
            if(!isNaN(totalTime)){
			if(totalTime != 0){
				document.getElementById("totalTime").innerHTML = sToHms(totalTime);
			}
	}
        }, false);
	myAudio.addEventListener("pause",
        function() { //监听暂停
            
        }, false);
    myAudio.addEventListener("ended", function() { //歌曲已经播放结束
		time = 0;
		nClick = 1;
		document.getElementById("currentTime").innerHTML = "00:00";
		document.getElementById("play").src = "images/img.png"
		clearInterval(idOfClock);
    }, false)
}

//处理播放按钮点击事件
function myFunction()
{
	if(nClick == 1){
		nClick = 2;
		myAudio.play();
		document.getElementById("play").src = "images/pause.png"
		idOfClock = setInterval("clock()",1000); //定时器刷新播放时间
	}else if(nClick == 2){
		nClick = 1;
		myAudio.pause();
		document.getElementById("play").src = "images/img.png"
		clearInterval(idOfClock);
	}
}
</script>
</body>
</html>
